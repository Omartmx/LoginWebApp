FROM tomcat:9.0-jre17

COPY ./LoginWebApp.war /usr/local/tomcat/webapps/ROOT.war

# Puerto expuesto (Render usa 10000 pero Tomcat usa 8080 internamente)
EXPOSE 8080

# Variable para el puerto que Render inyectará
ENV PORT=10000

# Script para manejar el puerto dinámico
CMD ["sh", "-c", "sed -i \"s/port=\"8080\"/port=\"${PORT}\"/g\" /usr/local/tomcat/conf/server.xml && catalina.sh run"]